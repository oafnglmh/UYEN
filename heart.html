<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>üíå Ch√∫c Uy·ªÉn 20-10 Vui V·∫ª üíñ</title>
<style>
html, body {
  height: 100%;
  margin: 0;
  background: radial-gradient(circle at center, #1a001f, #000);
  overflow: hidden;
  font-family: 'Poppins', sans-serif;
}

/* ====== R√®m m·ªü ƒë·∫ßu ====== */
.curtain {
  position: fixed;
  inset: 0;
  display: flex;
  z-index: 9999;
}
.panel {
  flex: 1;
  background: linear-gradient(to right, #ff5f9e, #ff1744);
  transition: transform 2s ease-in-out;
}
.panel.left { transform: translateX(0); }
.panel.right { transform: translateX(0); }
.curtain.open .left { transform: translateX(-100%); }
.curtain.open .right { transform: translateX(100%); }

/* ====== N√∫t m·ªü ====== */
.click-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-size: 26px;
  font-weight: bold;
  letter-spacing: 3px;
  text-shadow: 0 0 10px #ff9ecf, 0 0 20px #ff3b8e;
  cursor: pointer;
  z-index: 10000;
  animation: pulse 1.5s infinite;
}
@keyframes pulse {
  0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 0.7; transform: translate(-50%, -50%) scale(1.1); }
}

/* ====== Canvas tr√°i tim ====== */
canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: opacity 2s ease-in;
  z-index: 1; /* th·∫•p h∆°n th∆∞ */
}

/* ====== V√≤ng ch·ªØ xoay ====== */
.text-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-style: preserve-3d;
  animation: spin 20s linear infinite;
  color: #fff;
  text-shadow: 0 0 10px #ffb3d9, 0 0 20px #ff66b2, 0 0 40px #ff3399;
  font-weight: bold;
  letter-spacing: 5px;
  font-size: 30px;
  opacity: 0;
  transition: opacity 2s ease-in;
  z-index: 2;
}
@keyframes spin {
  from { transform: rotateY(0deg) rotateX(20deg); }
  to { transform: rotateY(360deg) rotateX(20deg); }
}
.text-ring span {
  position: absolute;
  left: 50%;
  transform-origin: 0 250px;
}

/* ====== L√° th∆∞ bay ====== */
.letter {
  position: absolute;
  width: 80px;
  height: 60px;
  background: #fff;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(255,192,203,0.6);
  cursor: pointer;
  transform-style: preserve-3d;
  animation: float 8s ease-in-out infinite;
  z-index: 5;
  transition: transform 0.6s ease, opacity 0.6s ease;
}
.letter::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #ffc0cb, #fff);
  border-radius: 5px;
  transform: rotateX(180deg);
}
@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-15px) rotate(5deg); }
}

/* ====== Popup th∆∞ ====== */
.letter-message {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.7);
  background: rgba(255, 255, 255, 0.95);
  padding: 25px 35px;
  border-radius: 15px;
  box-shadow: 0 0 40px #ff99cc;
  text-align: center;
  font-size: 20px;
  color: #ff4081;
  z-index: 10001;
  opacity: 0;
  transition: all 0.4s ease;
}
.letter-message.active {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* ====== N√∫t ƒë√≥ng th∆∞ ====== */
.close-btn {
  margin-top: 15px;
  padding: 6px 18px;
  background: #ff4081;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #ff66b2;
  transition: 0.3s;
}
.close-btn:hover { background: #e60073; }
</style>
</head>
<body>

<!-- R√®m m·ªü -->
<div class="curtain" style="z-index: 100000;" id="curtain">
  <div class="panel left"></div>
  <div class="panel right"></div>
</div>

<!-- D√≤ng ch·ªØ m·ªü -->
<div class="click-text"style="z-index: 100000;" id="clickText">üíå Nh·∫•n ƒë·ªÉ m·ªü m√≥n qu√† üíñ</div>

<!-- Canvas tr√°i tim -->
<canvas id="pinkboard"></canvas>

<!-- V√≤ng ch·ªØ xoay -->
<div class="text-ring" id="textRing"></div>

<!-- L√° th∆∞ bay quanh -->
<div class="letter" style="top:20%; left:15%; z-index: 9999;" data-msg="üíñ G·ª≠i ƒë·∫øn Uy·ªÉn ‚Äî Ch√∫c em lu√¥n xinh ƒë·∫πp, r·∫°ng r·ª° nh∆∞ ƒë√≥a hoa h∆∞·ªõng d∆∞∆°ng üåª"></div>
<div class="letter" style="top:60%; left:25%;z-index: 9999;" data-msg="üå∏ Mong r·∫±ng m·ªói ng√†y c·ªßa em ƒë·ªÅu ng·∫≠p tr√†n n·ª• c∆∞·ªùi v√† y√™u th∆∞∆°ng üíï"></div>
<div class="letter" style="top:40%; right:20%;z-index: 9999;" data-msg="üíå 20-10 kh√¥ng ch·ªâ l√† ng√†y t√¥n vinh ph√°i ƒë·∫πp, m√† l√† d·ªãp ƒë·ªÉ nh·∫Øc r·∫±ng em th·∫≠t tuy·ªát v·ªùi!"></div>
<div class="letter" style="bottom:15%; left:50%;z-index: 9999;" data-msg="üíó C·∫£m ∆°n v√¨ ƒë√£ mang ƒë·∫øn ni·ªÅm vui, h√£y lu√¥n h·∫°nh ph√∫c nh√©!"></div>

<!-- Popup hi·ªÉn th·ªã n·ªôi dung th∆∞ -->
<div class="letter-message" id="letterMsg">
  <div id="letterText"></div>
  <button class="close-btn" onclick="closeLetter()">ƒê√≥ng üíù</button>
</div>

<!-- Nh·∫°c n·ªÅn -->
<audio id="bgMusic" src="audio2.mp3" loop></audio>

<script>
const curtain = document.getElementById("curtain");
const clickText = document.getElementById("clickText");
const canvas = document.getElementById("pinkboard");
const textRing = document.getElementById("textRing");
const audio = document.getElementById("bgMusic");
const letters = document.querySelectorAll(".letter");
const letterMsg = document.getElementById("letterMsg");
const letterText = document.getElementById("letterText");

clickText.addEventListener("click", () => {
  clickText.style.display = "none";
  curtain.classList.add("open");
  setTimeout(() => {
    curtain.style.zIndex = "8888";
    canvas.style.opacity = 1;
    textRing.style.opacity = 1;
    startHeartEffect();
  }, 2000);

  audio.volume = 0;
  audio.play().then(() => {
    let vol = 0;
    const fade = setInterval(() => {
      vol += 0.02;
      audio.volume = vol;
      if (vol >= 0.5) clearInterval(fade);
    }, 100);
  });
});

/* Hi·ªáu ·ª©ng click th∆∞ */
letters.forEach(letter => {
  letter.addEventListener("click", () => {
    // Hi·ªáu ·ª©ng xoay v√† bi·∫øn m·∫•t
    letter.style.transform = "scale(0) rotate(360deg)";
    letter.style.opacity = "0";
    setTimeout(() => letter.remove(), 600);

    // Hi·ªán n·ªôi dung th∆∞
    letterText.innerHTML = letter.dataset.msg;
    letterMsg.classList.add("active");
  });
});
function closeLetter() {
  letterMsg.classList.remove("active");
}

/* ======================================
   ‚ù§Ô∏è Hi·ªáu ·ª©ng tr√°i tim
====================================== */
function startHeartEffect() {
  var settings = { particles: { length: 7000, duration: 4, velocity: 90, effect: -1.3, size: 8 } };
  var Point=function(x,y){this.x=x||0;this.y=y||0;};
  Point.prototype.clone=function(){return new Point(this.x,this.y);};
  Point.prototype.length=function(len){if(typeof len==='undefined')return Math.sqrt(this.x*this.x+this.y*this.y);
    this.normalize();this.x*=len;this.y*=len;return this;};
  Point.prototype.normalize=function(){var len=this.length();this.x/=len;this.y/=len;return this;};
  var Particle=function(){this.position=new Point();this.velocity=new Point();this.acceleration=new Point();this.age=0;};
  Particle.prototype.initialize=function(x,y,dx,dy){
    this.position.x=x;this.position.y=y;this.velocity.x=dx;this.velocity.y=dy;
    this.acceleration.x=dx*settings.particles.effect;this.acceleration.y=dy*settings.particles.effect;this.age=0;};
  Particle.prototype.update=function(dt){this.position.x+=this.velocity.x*dt;
    this.position.y+=this.velocity.y*dt;this.velocity.x+=this.acceleration.x*dt;
    this.velocity.y+=this.acceleration.y*dt;this.age+=dt;};
  Particle.prototype.draw=function(ctx,img){function ease(t){return (--t)*t*t+1;}
    var size=img.width*ease(this.age/settings.particles.duration);
    ctx.globalAlpha=1-this.age/settings.particles.duration;
    ctx.drawImage(img,this.position.x-size/2,this.position.y-size/2,size,size);};

  var ParticlePool=function(length){
    var particles=new Array(length),firstActive=0,firstFree=0,duration=settings.particles.duration;
    for(var i=0;i<length;i++)particles[i]=new Particle();
    this.add=function(x,y,dx,dy){
      particles[firstFree].initialize(x,y,dx,dy);
      firstFree=(firstFree+1)%length;if(firstActive===firstFree)firstActive=(firstActive+1)%length;};
    this.update=function(dt){var i;
      if(firstActive<firstFree){for(i=firstActive;i<firstFree;i++)particles[i].update(dt);}
      else{for(i=firstActive;i<length;i++)particles[i].update(dt);
      for(i=0;i<firstFree;i++)particles[i].update(dt);}
      while(particles[firstActive].age>=duration && firstActive!==firstFree){
        firstActive=(firstActive+1)%length;}};this.draw=function(ctx,img){
      if(firstActive<firstFree){for(var i=firstActive;i<firstFree;i++)particles[i].draw(ctx,img);}
      else{for(var i=firstActive;i<length;i++)particles[i].draw(ctx,img);
      for(var i=0;i<firstFree;i++)particles[i].draw(ctx,img);}};};

  (function(canvas){
    var ctx=canvas.getContext('2d'),
    particles=new ParticlePool(settings.particles.length),
    particleRate=settings.particles.length/settings.particles.duration,
    time;
    function pointOnHeart(t){return new Point(
      160*Math.pow(Math.sin(t),3),
      130*Math.cos(t)-50*Math.cos(2*t)-20*Math.cos(3*t)-10*Math.cos(4*t)+25);}
    var image=(function(){
      var c=document.createElement('canvas'),ctx=c.getContext('2d');
      c.width=settings.particles.size;c.height=settings.particles.size;
      function to(t){var p=pointOnHeart(t);
        p.x=settings.particles.size/2+p.x*settings.particles.size/350;
        p.y=settings.particles.size/2-p.y*settings.particles.size/350;return p;}
      ctx.beginPath();var t=-Math.PI;var p=to(t);ctx.moveTo(p.x,p.y);
      while(t<Math.PI){t+=0.02;p=to(t);ctx.lineTo(p.x,p.y);}
      ctx.closePath();ctx.fillStyle='#ff3366';ctx.shadowColor='#ff99cc';ctx.shadowBlur=15;ctx.fill();
      var img=new Image();img.src=c.toDataURL();return img;})();
    function render(){
      requestAnimationFrame(render);
      var newTime=new Date().getTime()/1000,deltaTime=newTime-(time||newTime);
      time=newTime;ctx.clearRect(0,0,canvas.width,canvas.height);
      var amount=particleRate*deltaTime;
      for(var i=0;i<amount;i++){var pos=pointOnHeart(Math.PI-2*Math.PI*Math.random());
        var dir=pos.clone().length(settings.particles.velocity);
        particles.add(canvas.width/2+pos.x,canvas.height/2-pos.y,dir.x,-dir.y);}
      particles.update(deltaTime);particles.draw(ctx,image);}
    function onResize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
    window.onresize=onResize;setTimeout(function(){onResize();render();},10);
  })(canvas);
}

/* ======================================
   üå∏ V√≤ng ch·ªØ xoay
====================================== */
const text = "  Ch√∫c Uy·ªÉn 20-10 Vui V·∫ª & H·∫°nh Ph√∫c  ";
for (let i = 0; i < text.length; i++) {
  const span = document.createElement("span");
  span.textContent = text[i];
  span.style.transform = `rotate(${i * (360 / text.length)}deg) translateX(250px) rotate(${-i * (360 / text.length)}deg)`;
  textRing.appendChild(span);
}
</script>
</body>
</html>
